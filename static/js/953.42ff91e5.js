"use strict";(self["webpackChunknewsmzc"]=self["webpackChunknewsmzc"]||[]).push([[953],{6953:function(t,e,s){s.r(e),s.d(e,{default:function(){return A}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VocationalWork"},[e("top-info",{attrs:{time:t.time},on:{"update:time":function(e){t.time=e}}}),e("center-info",{attrs:{"show-center":t.showCenter,name:t.centerName},on:{back:t.goback,home:t.gohome,center:t.centerBen}},[e("div",{staticClass:"yw-progress"},[e("sm-progress",{attrs:{nowStep:t.nowStep,stepList:t.stepList}})],1),e("div",{staticClass:"yw-content"},[e(t.nowPage,{ref:"child",tag:"component",attrs:{nowPage:t.nowPage,nowStep:t.nowStep,time:t.time,back:t.back,qyInfo:t.qyInfo,zxbgPdf:t.zxbgPdf},on:{"update:nowPage":function(e){t.nowPage=e},"update:now-page":function(e){t.nowPage=e},"update:nowStep":function(e){t.nowStep=e},"update:now-step":function(e){t.nowStep=e},"update:time":function(e){t.time=e},"update:back":function(e){t.back=e},"update:qyInfo":function(e){t.qyInfo=e},"update:qy-info":function(e){t.qyInfo=e},"update:zxbgPdf":function(e){t.zxbgPdf=e},"update:zxbg-pdf":function(e){t.zxbgPdf=e}}})],1)]),e("bottom-info")],1)},o=[],i=function(){var t=this,e=t._self._c;return e("yw-box",{staticClass:"xzcxqy-box",attrs:{title:"选择要查询的企业"}},[e("yj-table",{attrs:{data:t.List,field:"nsrmc"},on:{confirm:t.nextStep}},[e("yj-table-column",{attrs:{width:"80px",prop:"index",label:"序号"}}),e("yj-table-column",{attrs:{prop:"nsrsbh",label:"纳税人识别号"}}),e("yj-table-column",{attrs:{prop:"nsrmc",label:"纳税人名称"}}),e("yj-table-column",{attrs:{width:"170px",label:"操作"}})],1)],1)},c=[],r=s(8069),d={name:"NewsmzcXzcxqy",data(){return{List:[]}},created(){this.$emit("update:nowStep",1),this.$emit("update:time",120);let t=JSON.parse(sessionStorage.getItem("IDCARD_INFO"));t&&(""==t.name||null==t.name?this.getName(t):this.getQyList(t))},mounted(){this.getQyList()},methods:{getName(t){return this.getQyList(),!1},getQyList(t){return this.List=this.$companyList,!1},nextStep(t){console.log("e>>> ",t),sessionStorage.setItem("USERINFO",JSON.stringify(t)),this.$emit("update:nowPage","zxbgdy"),this.$emit("update:back",{page:"zxbgdy",a:(new Date).getTime()})}}},p=d,l=s(1001),m=(0,l.Z)(p,i,c,!1,null,"a03c2a76",null),h=m.exports,u=function(){var t=this,e=t._self._c;return e("yw-box",{staticClass:"xzcxrq-box",attrs:{title:"请选择您要查询的企业"}},[e("div",{staticClass:"box-tip"},[t._v("正在查询企业："+t._s(t.qyInfo.nsrmc))]),e("div",{staticClass:"box-content"},[e("div",{staticClass:"b-c-tip"},[t._v("查询起止时间：")]),e("div",{staticClass:"b-c-picker"},[e("date-picker",{attrs:{default:t.selectDate.start,model:t.selectDate.start},on:{"update:model":function(e){return t.$set(t.selectDate,"start",e)}}})],1),e("div",{staticClass:"b-t-line"},[t._v("-")]),e("div",{staticClass:"b-c-picker"},[e("date-picker",{attrs:{default:t.selectDate.end,model:t.selectDate.end},on:{"update:model":function(e){return t.$set(t.selectDate,"end",e)}}})],1),e("div",{staticClass:"b-c-button",on:{click:t.search}},[t._v("查询")])])])},g=[],b={name:"NewsmzcXzcxrq",props:["qyInfo"],data(){return{selectDate:{start:"",end:""}}},mounted(){this.$emit("update:nowStep",2),this.$emit("update:time",120),this.getNowTime()},methods:{getNowTime(){let t=new Date;var e=t.getFullYear(),s=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),n=e-1;this.selectDate={end:e+"-"+s+"-"+a,start:n+"-"+s+"-"+a}},search(){this.$emit("update:zxbgPdf",a),this.$emit("update:nowPage","zxbgdy"),this.$emit("update:back",{page:"zxbgdy",a:(new Date).getTime()})}}},w=b,x=(0,l.Z)(w,u,g,!1,null,"6c3ba633",null),f=x.exports,y=function(){var t=this,e=t._self._c;return e("yw-box",{staticClass:"zxbgdy-box"},[e("iframe",{staticClass:"ifarme",attrs:{src:t.zxbg}})])},z=[],$={name:"NewsmzcZxbgdy",data(){return{zxbg:"",zxbgdy:""}},created(){this.$emit("update:nowStep",2),this.$emit("update:time",120)},mounted(){this.qyfwyz()},methods:{qyfwyz(){var t=JSON.parse(sessionStorage.getItem("USERINFO")).shxydm;return console.log(t),"91610131MAB0PY727K"==t?this.zxbg="https://smzc-1253299035.cos.ap-nanjing.myqcloud.com/zht/91610131MAB0PY727K.pdf":"91611104MABWH5L81F"==t?this.zxbg="https://smzc-1253299035.cos.ap-nanjing.myqcloud.com/zht/91611104MABWH5L81F.pdf":"91611105MA7JDWQA2E"==t?this.zxbg="https://smzc-1253299035.cos.ap-nanjing.myqcloud.com/zht/91611105MA7JDWQA2E.pdf":"91611105MABRM1565D"==t?this.zxbg="https://smzc-1253299035.cos.ap-nanjing.myqcloud.com/zht/91611105MABRM1565D.pdf":"91611105MABTHH5201"==t&&(this.zxbg="https://smzc-1253299035.cos.ap-nanjing.myqcloud.com/zht/91611105MABTHH5201.pdf"),!1},qyfwzxyl(t){this.$loading.show("正在查询...");let e=JSON.parse(sessionStorage.getItem("USERINFO")),s={token:t.access_token,operateType:1,productId:9,companyCode:e.shxydm,companyName:""};(0,r.rv)(s).then((t=>{this.$loading.hide(),200==t.code?this.zxbg=t.data.previewUrl:this.$msgbox({title:"警告",content:t.msg,type:"error",showCansole:!1}).then((()=>{}))}))},getprint(t){this.$loading.show("正在查询...");let e=JSON.parse(sessionStorage.getItem("USERINFO")),s={token:t.access_token,operateType:2,productId:9,companyCode:e.shxydm,companyName:""};(0,r.rv)(s).then((t=>{this.$loading.hide(),200==t.code?this.zxbgdy=t.data.downloadUrl:this.$msgbox({title:"警告",content:t.msg,type:"error",showCansole:!1}).then((()=>{}))}))},print(){return this.$loading.show("正在打印..."),setTimeout((()=>{this.$loading.hide(),this.$emit("update:nowPage","blwc"),this.$emit("update:back",{page:"blwc",a:(new Date).getTime()})}),1e3),!1}}},v=$,S=(0,l.Z)(v,y,z,!1,null,"52a94bc9",null),k=S.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"blwc-box"},[e("success")],1)},q=[],N={name:"NewsmzcBlwc",data(){return{}},created(){this.$emit("update:nowStep",3),this.$emit("update:time",20)},mounted(){},methods:{}},D=N,I=(0,l.Z)(D,C,q,!1,null,"d41b8c18",null),P=I.exports,_={name:"NewsmzcIndex",components:{xzcxqy:h,xzcxrq:f,zxbgdy:k,blwc:P},data(){return{time:120,nowStep:1,stepList:["征信报告查询打印","选择查询企业","征信报告打印预览","办理完成"],showCenter:!1,centerName:"",nowPage:"xzcxqy",back:"",pageList:["xzcxqy"],qyInfo:{},zxbgPdf:""}},watch:{nowPage(t){"zxbgdy"==t?(this.showCenter=!0,this.centerName="打印"):this.showCenter=!1},back(t){this.pageList.push(t.page)}},mounted(){},methods:{goback(){var t=this.pageList;1==t.length?this.$router.back():(this.nowPage=t[t.length-2],this.pageList.pop())},centerBen(){var t=this.nowPage;"zxbgdy"==t&&this.$refs.child.print()},gohome(){this.$router.push({path:"/",replace:!0})}},beforeDestroy(){}},L=_,M=(0,l.Z)(L,n,o,!1,null,"1473daa9",null),A=M.exports}}]);